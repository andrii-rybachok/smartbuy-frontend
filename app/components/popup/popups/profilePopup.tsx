
import { ReactElement, useRef } from "react";
import PopupOverlay, { timeout } from "../popupOvelay";
import styles from "./profilePopup.module.css";
import Link from "next/link";
import { helveticaLight } from "@/app/styles/fonts";
import Logout from "../../logout";

export default function ProfilePopup({
   trigger,
   setTrigger,
   isAuthorized,
}: {
   trigger: boolean;
   setTrigger: any;
   isAuthorized: boolean;
}) {
   async function Animation(popup: ReactElement) {
      let popup_ = document.getElementsByClassName(popup.props.className)[0];
      popup_.classList.replace(styles.slideDown, styles.slideUp);
   }

   return (
      <PopupOverlay animation={Animation} trigger={trigger} setTrigger={setTrigger}>
         <div className={styles.profilePopup + " " + styles.slideDown} onClick={(e)=>{e.stopPropagation();}}>
            <ul className={styles.optionList + " " + helveticaLight.className}>
               {isAuthorized ? (
                  <>
                     <li>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
                           <path
                              d="M10 2C11.0609 2 12.0783 2.42143 12.8284 3.17157C13.5786 3.92172 14 4.93913 14 6C14 7.06087 13.5786 8.07828 12.8284 8.82843C12.0783 9.57857 11.0609 10 10 10C8.93913 10 7.92172 9.57857 7.17157 8.82843C6.42143 8.07828 6 7.06087 6 6C6 4.93913 6.42143 3.92172 7.17157 3.17157C7.92172 2.42143 8.93913 2 10 2ZM10 12C14.42 12 18 13.79 18 16V18H2V16C2 13.79 5.58 12 10 12Z"
                              fill="#777777"
                           />
                        </svg>
                        <Link href={"#"}>Профіль</Link>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                           <path
                              d="M14.4665 8.90008L13.7998 9.56675L12.4332 8.20008L13.0998 7.53341C13.2398 7.39341 13.4732 7.39341 13.6132 7.53341L14.4665 8.38675C14.6065 8.52675 14.6065 8.76008 14.4665 8.90008ZM7.99984 12.6267L12.0398 8.58675L13.4065 9.95341L9.37317 14.0001H7.99984V12.6267ZM7.99984 9.33341C5.05317 9.33341 2.6665 10.5267 2.6665 12.0001V13.3334H6.6665V12.0734L9.33317 9.40675C8.89317 9.35341 8.4465 9.33341 7.99984 9.33341ZM7.99984 2.66675C7.29259 2.66675 6.61432 2.9477 6.11422 3.4478C5.61412 3.94789 5.33317 4.62617 5.33317 5.33341C5.33317 6.04066 5.61412 6.71894 6.11422 7.21903C6.61432 7.71913 7.29259 8.00008 7.99984 8.00008C8.70708 8.00008 9.38536 7.71913 9.88546 7.21903C10.3856 6.71894 10.6665 6.04066 10.6665 5.33341C10.6665 4.62617 10.3856 3.94789 9.88546 3.4478C9.38536 2.9477 8.70708 2.66675 7.99984 2.66675Z"
                              fill="#777777"
                           />
                        </svg>
                     </li>
                     <li>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                           <path
                              d="M7.22222 10.3333H11.8889V11.8889H7.22222V10.3333ZM5.66667 4.11111H4.11111V5.66667H5.66667V4.11111ZM7.22222 8.77778H11.8889V7.22222H7.22222V8.77778ZM7.22222 5.66667H11.8889V4.11111H7.22222V5.66667ZM5.66667 7.22222H4.11111V8.77778H5.66667V7.22222ZM15 2.55556V13.4444C15 14.3 14.3 15 13.4444 15H2.55556C1.7 15 1 14.3 1 13.4444V2.55556C1 1.7 1.7 1 2.55556 1H13.4444C14.3 1 15 1.7 15 2.55556ZM13.4444 2.55556H2.55556V13.4444H13.4444V2.55556ZM5.66667 10.3333H4.11111V11.8889H5.66667V10.3333Z"
                              fill="#777777"
                           />
                        </svg>
                        <Link href={"#"}>Мої замовлення</Link>
                     </li>
                     <li>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                           <path
                              d="M8.08 12.8638L8 12.9401L7.912 12.8638C4.112 9.57548 1.6 7.40109 1.6 5.19619C1.6 3.6703 2.8 2.52589 4.4 2.52589C5.632 2.52589 6.832 3.28883 7.256 4.32643H8.744C9.168 3.28883 10.368 2.52589 11.6 2.52589C13.2 2.52589 14.4 3.6703 14.4 5.19619C14.4 7.40109 11.888 9.57548 8.08 12.8638ZM11.6 1C10.208 1 8.872 1.61798 8 2.58692C7.128 1.61798 5.792 1 4.4 1C1.936 1 0 2.83869 0 5.19619C0 8.07248 2.72 10.43 6.84 13.9929L8 15L9.16 13.9929C13.28 10.43 16 8.07248 16 5.19619C16 2.83869 14.064 1 11.6 1Z"
                              fill="#777777"
                           />
                        </svg>
                        <Link href={"#"}>Список вподобань</Link>
                     </li>
                     <li>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                           <g clip-path="url(#clip0_18_1345)">
                              <path
                                 d="M7.99984 15.3334C7.82303 15.3334 7.65346 15.2632 7.52843 15.1382C7.40341 15.0131 7.33317 14.8436 7.33317 14.6667V12.6667H4.6665C4.31288 12.6667 3.97374 12.5263 3.72369 12.2762C3.47365 12.0262 3.33317 11.687 3.33317 11.3334V4.66675C3.33317 3.92675 3.93317 3.33341 4.6665 3.33341H13.9998C14.3535 3.33341 14.6926 3.47389 14.9426 3.72394C15.1927 3.97399 15.3332 4.31313 15.3332 4.66675V11.3334C15.3332 11.687 15.1927 12.0262 14.9426 12.2762C14.6926 12.5263 14.3535 12.6667 13.9998 12.6667H11.2665L8.79984 15.1401C8.6665 15.2667 8.49984 15.3334 8.33317 15.3334H7.99984ZM8.6665 11.3334V13.3867L10.7198 11.3334H13.9998V4.66675H4.6665V11.3334H8.6665ZM1.99984 10.0001H0.666504V2.00008C0.666504 1.64646 0.80698 1.30732 1.05703 1.05727C1.30708 0.807224 1.64622 0.666748 1.99984 0.666748H12.6665V2.00008H1.99984V10.0001Z"
                                 fill="#777777"
                              />
                           </g>
                           <defs>
                              <clipPath id="clip0_18_1345">
                                 <rect width="16" height="16" fill="white" />
                              </clipPath>
                           </defs>
                        </svg>
                        <Link href={"#"}><Logout/></Link>
                     </li>
                     
                  </>
               ) : (
                  <>
                     <li>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                           <g clip-path="url(#clip0_18_1345)">
                              <path
                                 d="M7.99984 15.3334C7.82303 15.3334 7.65346 15.2632 7.52843 15.1382C7.40341 15.0131 7.33317 14.8436 7.33317 14.6667V12.6667H4.6665C4.31288 12.6667 3.97374 12.5263 3.72369 12.2762C3.47365 12.0262 3.33317 11.687 3.33317 11.3334V4.66675C3.33317 3.92675 3.93317 3.33341 4.6665 3.33341H13.9998C14.3535 3.33341 14.6926 3.47389 14.9426 3.72394C15.1927 3.97399 15.3332 4.31313 15.3332 4.66675V11.3334C15.3332 11.687 15.1927 12.0262 14.9426 12.2762C14.6926 12.5263 14.3535 12.6667 13.9998 12.6667H11.2665L8.79984 15.1401C8.6665 15.2667 8.49984 15.3334 8.33317 15.3334H7.99984ZM8.6665 11.3334V13.3867L10.7198 11.3334H13.9998V4.66675H4.6665V11.3334H8.6665ZM1.99984 10.0001H0.666504V2.00008C0.666504 1.64646 0.80698 1.30732 1.05703 1.05727C1.30708 0.807224 1.64622 0.666748 1.99984 0.666748H12.6665V2.00008H1.99984V10.0001Z"
                                 fill="#777777"
                              />
                           </g>
                           <defs>
                              <clipPath id="clip0_18_1345">
                                 <rect width="16" height="16" fill="white" />
                              </clipPath>
                           </defs>
                        </svg>
                        <Link href={"/identity/login"}>Вхід</Link>
                     </li>
                     <li>
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                           <g clip-path="url(#clip0_18_1345)">
                              <path
                                 d="M7.99984 15.3334C7.82303 15.3334 7.65346 15.2632 7.52843 15.1382C7.40341 15.0131 7.33317 14.8436 7.33317 14.6667V12.6667H4.6665C4.31288 12.6667 3.97374 12.5263 3.72369 12.2762C3.47365 12.0262 3.33317 11.687 3.33317 11.3334V4.66675C3.33317 3.92675 3.93317 3.33341 4.6665 3.33341H13.9998C14.3535 3.33341 14.6926 3.47389 14.9426 3.72394C15.1927 3.97399 15.3332 4.31313 15.3332 4.66675V11.3334C15.3332 11.687 15.1927 12.0262 14.9426 12.2762C14.6926 12.5263 14.3535 12.6667 13.9998 12.6667H11.2665L8.79984 15.1401C8.6665 15.2667 8.49984 15.3334 8.33317 15.3334H7.99984ZM8.6665 11.3334V13.3867L10.7198 11.3334H13.9998V4.66675H4.6665V11.3334H8.6665ZM1.99984 10.0001H0.666504V2.00008C0.666504 1.64646 0.80698 1.30732 1.05703 1.05727C1.30708 0.807224 1.64622 0.666748 1.99984 0.666748H12.6665V2.00008H1.99984V10.0001Z"
                                 fill="#777777"
                              />
                           </g>
                           <defs>
                              <clipPath id="clip0_18_1345">
                                 <rect width="16" height="16" fill="white" />
                              </clipPath>
                           </defs>
                        </svg>
                        <Link href={"/identity/register"}>Реєстрація</Link>
                     </li>
                  </>
               )}
               <li>
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
                     <path
                        d="M8.00159 10.45C7.33358 10.45 6.69293 10.1919 6.22058 9.73241C5.74822 9.27295 5.48286 8.64978 5.48286 8C5.48286 7.35022 5.74822 6.72705 6.22058 6.26759C6.69293 5.80812 7.33358 5.55 8.00159 5.55C8.6696 5.55 9.31025 5.80812 9.7826 6.26759C10.255 6.72705 10.5203 7.35022 10.5203 8C10.5203 8.64978 10.255 9.27295 9.7826 9.73241C9.31025 10.1919 8.6696 10.45 8.00159 10.45ZM13.3485 8.679C13.3773 8.455 13.3989 8.231 13.3989 8C13.3989 7.769 13.3773 7.538 13.3485 7.3L14.8669 6.159C15.0037 6.054 15.0396 5.865 14.9533 5.711L13.514 3.289C13.4277 3.135 13.2334 3.072 13.075 3.135L11.2831 3.835C10.9089 3.562 10.5203 3.324 10.0669 3.149L9.80068 1.294C9.7719 1.126 9.62077 1 9.44086 1H6.56231C6.38241 1 6.23128 1.126 6.2025 1.294L5.93623 3.149C5.48286 3.324 5.09425 3.562 4.72004 3.835L2.92815 3.135C2.76983 3.072 2.57552 3.135 2.48917 3.289L1.04989 5.711C0.956341 5.865 0.999519 6.054 1.13625 6.159L2.65468 7.3C2.6259 7.538 2.60431 7.769 2.60431 8C2.60431 8.231 2.6259 8.455 2.65468 8.679L1.13625 9.841C0.999519 9.946 0.956341 10.135 1.04989 10.289L2.48917 12.711C2.57552 12.865 2.76983 12.921 2.92815 12.865L4.72004 12.158C5.09425 12.438 5.48286 12.676 5.93623 12.851L6.2025 14.706C6.23128 14.874 6.38241 15 6.56231 15H9.44086C9.62077 15 9.7719 14.874 9.80068 14.706L10.0669 12.851C10.5203 12.669 10.9089 12.438 11.2831 12.158L13.075 12.865C13.2334 12.921 13.4277 12.865 13.514 12.711L14.9533 10.289C15.0396 10.135 15.0037 9.946 14.8669 9.841L13.3485 8.679Z"
                        fill="#777777"
                     />
                  </svg>
                  <Link href={"#"}>Налаштування</Link>
               </li>
            </ul>
         </div>
      </PopupOverlay>
   );
}
